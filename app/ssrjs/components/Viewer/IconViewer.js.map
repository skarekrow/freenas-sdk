{"version":3,"sources":["app/jsx/components/Viewer/IconViewer.jsx"],"names":[],"mappings":"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","file":"app/jsx/components/Viewer/IconViewer.jsx","sourcesContent":["\n\n\"use strict\";\n\nimport React from \"react\";\n\nimport { Link, RouteHandler } from \"react-router\";\n\nimport Icon from \"../Icon\";\n\nimport viewerCommon from \"../mixins/viewerCommon\";\nimport viewerUtil from \"./viewerUtil\";\n\nimport ToggleSwitch from \"../common/ToggleSwitch\";\n\n// Icon Viewer\nvar IconViewer = React.createClass({\n\n    mixins: [ viewerCommon ]\n\n  , contextTypes: {\n      router: React.PropTypes.func\n    }\n\n  , propTypes: {\n        viewData         : React.PropTypes.object.isRequired\n      , inputData        : React.PropTypes.array.isRequired\n      , handleItemSelect : React.PropTypes.func.isRequired\n      , selectedItem     : React.PropTypes.oneOfType([ React.PropTypes.number, React.PropTypes.string ])\n      , searchString     : React.PropTypes.string\n      , filteredData     : React.PropTypes.object.isRequired\n    }\n\n  , componentDidMount: function () {\n      window.addEventListener( \"keyup\", this.handleEscClose );\n    }\n\n  , componentWillUnmount: function () {\n      window.removeEventListener( \"keyup\", this.handleEscClose );\n    }\n\n  , handleEscClose: function( event ) {\n      if ( event.which === 27 && this.dynamicPathIsActive() ) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.returnToViewerRoot();\n      }\n    }\n\n  , handleClickOut: function( event, componentID ) {\n      if ( event.dispatchMarker === componentID ) {\n        this.returnToViewerRoot();\n      }\n    }\n\n  , handleItemClick: function( params, selectionValue, event ) {\n      switch ( event.type ) {\n        case \"click\":\n          this.props.handleItemSelect( selectionValue );\n          break;\n\n        case \"dblclick\":\n          this.context.router.transitionTo( this.props.viewData.routing.route, params );\n          break;\n      }\n    }\n\n  , createItem: function( rawItem ) {\n      var searchString   = this.props.searchString;\n      var selectionValue = rawItem[ this.props.viewData.format[\"selectionKey\"] ];\n      var params = {};\n\n      params[ this.props.viewData.routing[\"param\"] ] = selectionValue;\n\n      var primaryText   = rawItem[ this.props.viewData.format[\"primaryKey\"] ];\n      var secondaryText = rawItem[ this.props.viewData.format[\"secondaryKey\"] ];\n\n      if ( searchString.length ) {\n        primaryText   = viewerUtil.markSearch( primaryText.split( searchString ), searchString );\n        secondaryText = viewerUtil.markSearch( secondaryText.split( searchString ), searchString );\n      }\n\n      var ts = null;\n      if ( this.props.viewData.display.showToggleSwitch )\n      {\n        var serviceState = (secondaryText === \"running\" ? true : false);\n        ts = <ToggleSwitch\n                toggled   = { serviceState }\n                onChange  = { this.props.viewData.display.handleToggle.bind( null, rawItem ) } />;\n      }\n\n      return (\n        <div\n          className     = { \"viewer-icon-item\" + ( selectionValue === this.props.selectedItem ? \" active\" : \"\" ) }\n          onClick       = { this.handleItemClick.bind( null, null, selectionValue ) }\n          onDoubleClick = { this.handleItemClick.bind( null, params, selectionValue ) } >\n          <viewerUtil.ItemIcon primaryString  = { rawItem[ this.props.viewData.format[\"secondaryKey\"] ] }\n                               fallbackString = { rawItem[ this.props.viewData.format[\"primaryKey\"] ] }\n                               iconImage      = { rawItem[ this.props.viewData.format[\"imageKey\"] ] }\n                               fontIcon       = { rawItem[ this.props.viewData.format[\"fontIconKey\"] ] }\n                               seedNumber     = { rawItem[ this.props.viewData.format[\"uniqueKey\"] ] }\n                               fontSize       = { 1 } />\n          <div className=\"viewer-icon-item-text\">\n            <h6 className=\"viewer-icon-item-primary\">{ primaryText }</h6>\n            <small className=\"viewer-icon-item-secondary\">{ secondaryText }</small>\n            { ts }\n          </div>\n        </div>\n      );\n    }\n\n  , render: function () {\n      var fd = this.props.filteredData;\n      var editorContent      = null;\n      var groupedIconItems   = null;\n      var remainingIconItems = null;\n\n      if ( this.dynamicPathIsActive() ) {\n        editorContent = (\n          <div className = \"overlay-light editor-edit-overlay\"\n               onClick   = { this.handleClickOut } >\n            <div className=\"editor-edit-wrapper\">\n              <span className=\"clearfix\">\n                <Icon\n                  glyph    = \"close\"\n                  icoClass = \"editor-close\"\n                  onClick  = { this.handleClickOut } />\n              </span>\n              <RouteHandler\n                viewData  = { this.props.viewData }\n                inputData = { this.props.inputData }\n                activeKey = { this.props.selectedKey } />\n            </div>\n          </div>\n        );\n      }\n\n      if ( fd[\"grouped\"] ) {\n        groupedIconItems = fd.groups.map( function ( group, index ) {\n          if ( group.entries.length ) {\n            return (\n              <div className=\"viewer-icon-section\" key={ index }>\n                <h4>{ group.name }</h4>\n                <hr />\n                { group.entries.map( this.createItem ) }\n              </div>\n            );\n          } else {\n            return null;\n          }\n        }.bind(this) );\n      }\n\n      if ( fd[\"remaining\"].entries.length ) {\n        remainingIconItems = (\n          <div className=\"viewer-icon-section\">\n            <h4>{ fd[\"remaining\"].name }</h4>\n            <hr />\n            { fd[\"remaining\"].entries.map( this.createItem ) }\n          </div>\n        );\n      }\n\n      return (\n        <div className = \"viewer-icon\">\n          { editorContent }\n          { groupedIconItems }\n          { remainingIconItems }\n        </div>\n      );\n    }\n});\n\nmodule.exports = IconViewer;\n"]}