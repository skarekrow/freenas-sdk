{"version":3,"sources":["app/jsx/components/DebugTools/Subscriptions.jsx"],"names":[],"mappings":"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","file":"app/jsx/components/DebugTools/Subscriptions.jsx","sourcesContent":["// Subscriptions Debug Tab\n// =============\n\n\"use strict\";\n\nimport _ from \"lodash\";\nimport React from \"react\";\nimport TWBS from \"react-bootstrap\";\n\nvar componentLongName = \"Debug Tools - Subscriptions Tab\";\n\n// Disclosure Triangles\nimport DiscTri from \"../common/DiscTri\";\n\n// Middleware\nimport SubscriptionsStore from \"../../stores/SubscriptionsStore\";\nimport MiddlewareClient from \"../../middleware/MiddlewareClient\";\n\n\nvar Subscriptions = React.createClass({\n\n    getInitialState: function () {\n      return {\n          subscriptions : SubscriptionsStore.getAllSubscriptions()\n        , subsMasks     : \"\"\n      };\n    }\n\n  , componentDidMount: function () {\n      SubscriptionsStore.addChangeListener( this.handleMiddlewareChange );\n    }\n\n  , componentWillUnmount: function () {\n      SubscriptionsStore.removeChangeListener( this.handleMiddlewareChange );\n    }\n\n  , handleMiddlewareChange: function () {\n      this.setState({\n          subscriptions : SubscriptionsStore.getAllSubscriptions()\n      });\n    }\n\n  , handleMaskInputChange: function( event ) {\n      this.setState({\n          subsMasks : event.target.value\n      });\n    }\n\n  , handleSubsSubmit: function () {\n      MiddlewareClient.subscribe( this.state.subsMasks.replace(/\\s/g,\"\").split(\",\"), componentLongName);\n    }\n\n  , createList: function( item, index ) {\n      return (\n        <li key={ index }>{ item }</li>\n      );\n    }\n\n  , createRow: function( namespace, index ) {\n      var listItems = [];\n      _.forEach( this.state.subscriptions[ namespace ], function ( value, key ) {\n        listItems.push(String(key).concat(\" : \", value));\n      });\n      return (\n        <tr key={ index }>\n          <td>{ namespace }</td>\n          <td>{ _.sum(this.state.subscriptions[ namespace ]) }</td>\n          <td>\n            <DiscTri key={ index } defaultExpanded={false}>\n              <ul>{ listItems.map( this.createList ) }</ul>\n            </DiscTri>\n          </td>\n        </tr>\n      );\n    }\n\n  , render: function () {\n      var subscriptionsContent = null;\n      var removeALL = MiddlewareClient.unsubscribeALL;\n\n      if ( _.isEmpty( this.state.subscriptions ) ) {\n        subscriptionsContent = <h3 className=\"text-center\">No log content</h3>;\n      } else {\n        var subscriptionKeys = _.sortBy(\n          _.keys( this.state.subscriptions ), function ( key ) {\n            return this.state.subscriptions[ key ];\n          }.bind(this)\n        );\n\n        subscriptionsContent = (\n          <TWBS.Table responsive>\n            <thead>\n              <tr>\n                <th>Namespace</th>\n                <th>{\"Total Number of subscribed components\"}</th>\n                <th>{\"Individual ComponentID counts\"}</th>\n              </tr>\n            </thead>\n            <tbody>\n              { subscriptionKeys.map( this.createRow ) }\n            </tbody>\n          </TWBS.Table>\n        );\n      }\n\n      return (\n        <div className=\"debug-content-flex-wrapper\">\n\n          <TWBS.Col xs={6} className=\"debug-column\" >\n\n            <h5 className=\"debug-heading\">Active Subscriptions</h5>\n            <div className=\"debug-column-content\">\n              { subscriptionsContent }\n            </div>\n\n          </TWBS.Col>\n\n          <TWBS.Col xs={6} className=\"debug-column\" >\n\n            <h5 className=\"debug-heading\">Add Subsriptions</h5>\n            <TWBS.Row>\n              <TWBS.Col xs={5}>\n                <TWBS.Input type        = \"textarea\"\n                            style       = {{ resize: \"vertical\", height: \"34px\" }}\n                            placeholder = \"Subscription Mask(s)\"\n                            onChange    = { this.handleMaskInputChange }\n                            value       = { this.state.subsMasks } />\n              </TWBS.Col>\n            </TWBS.Row>\n            <TWBS.Row>\n              <TWBS.Col xs={2}>\n                <TWBS.Button bsStyle = \"primary\"\n                             onClick = { this.handleSubsSubmit }\n                             block>\n                  {\"Submit\"}\n                </TWBS.Button>\n              </TWBS.Col>\n            </TWBS.Row>\n\n            <h5 className=\"debug-heading\">Remove Subscriptions</h5>\n              <div className=\"debug-column-content\">\n                <TWBS.Button block bsStyle = \"danger\"\n                             onClick = { removeALL }>\n                  {\"Remove All Subscriptions\"}\n                </TWBS.Button>\n              </div>\n\n          </TWBS.Col>\n        </div>\n      );\n    }\n\n});\n\nmodule.exports = Subscriptions;\n"]}