{"version":3,"sources":["app/jsx/middleware/MiddlewareClientDebug.js"],"names":[],"mappings":"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","file":"app/jsx/middleware/MiddlewareClientDebug.js","sourcesContent":["// MIDDLEWARE CLIENT DEBUG\n// =======================\n// Companion class for Middleware Client. Abstracts out some of the more\n// cumbersome debug methods to keep process flow simple and obvious in the\n// Middleware Client.\n\n\"use strict\";\n\nimport _ from \"lodash\";\n\nimport DebugLogger from \"../common/DebugLogger\";\n\nclass MiddlewareClientDebug extends DebugLogger {\n\n  constructor () {\n    super( \"MIDDLEWARE_CLIENT_DEBUG\" );\n  }\n\n  logPack ( namespace, name, args, id ) {\n    let validPack = true;\n    let prefix = \"BAD PACK: \";\n\n    if ( !_.isString( namespace ) ) {\n      validPack = false;\n      this.warn( \"packing\"\n                           , prefix + `Provided namespace was not a string for request ` +\n                             `%c'${ id }'%c`\n                           , [ this.DEBUGCSS.uuid, this.DEBUGCSS.normal ]\n      );\n    }\n    if ( !_.isString( name ) ) {\n      validPack = false;\n      this.warn( \"packing\"\n             , prefix +\n               `Provided name was not a string for request %c'${ id }'%c`\n             , [ this.DEBUGCSS.uuid, this.DEBUGCSS.normal ]\n             );\n    }\n    if ( typeof args === ( \"null\" || \"undefined\" ) ) {\n      validPack = false;\n      this.warn( \"packing\"\n             , prefix +\n               `Provided args value was null or undefined for request ` +\n               `%c'${ id }'%c`\n             , [ this.DEBUGCSS.uuid, this.DEBUGCSS.normal ]\n             );\n    }\n    if ( !_.isString( id ) ) {\n      validPack = false;\n      let packArgs = args\n                   ? \":\" + args\n                   : \"\";\n\n      this.warn( \"packing\"\n             , prefix +\n               `UUID %c'${ id }'%c for '${ namespace }'${ packArgs } had ` +\n               `to be generated because none was provided%c`\n             , [ this.DEBUGCSS.uuid, this.DEBUGCSS.normal ]\n             );\n\n    }\n\n    if ( validPack ) {\n      this.info( `Packed request %c'${ id }'%c successfully.`\n             , [ this.DEBUGCSS.uuid, this.DEBUGCSS.normal ]\n             );\n    } else {\n      this.log(\n        [ \"Dump of bad pack:\"\n        , { namespace: namespace\n          , name: name\n          , id: id\n          , args: args\n          }\n        ]\n      );\n    }\n  }\n\n  logNewSubscriptionMasks ( masks ) {\n    let logMasks = masks.length > 1\n                 ? _.clone( masks )\n                     .splice( masks.length - 1, 0, \" and \" )\n                     .join( \", \" )\n                 : masks;\n\n    this.log( `Requested: Subscribe to %c'${ logMasks }'%c events`\n            , [ \"args\", \"normal\" ]\n            );\n  }\n\n  logSubscription ( subCount, mask ) {\n    if ( subCount > 0 ) {\n      this.info( `${ subCount } React components are currently ` +\n                 `subscribed to %c'${ mask }'%c events`\n               , [ \"args\", \"normal\" ]\n               );\n      this.log( `Increasing subscription count for %c'${ mask }'`, \"args\" );\n    } else {\n      this.info( `No React components are currently subscribed to ` +\n                 `%c'${ mask }'%c events`\n               , [ \"args\", \"normal\" ]\n               );\n      this.log( `Sending subscription request, and setting subscription ` +\n                `count for %c'${ mask }'%c to 1`\n              , [ \"args\", \"normal\" ]\n              );\n    }\n  }\n\n  logUnsubscribeMasks ( masks ) {\n    let logMasks = masks.length > 1\n                 ? _.clone( masks )\n                     .splice( masks.length - 1, 0, \" and \" )\n                     .join( \", \" )\n                 : masks;\n\n    this.log( `Requested: Subscribe to %c'${ logMasks }'%c events`\n            , [ \"args\", \"normal\" ]\n            );\n  }\n\n  logUnsubscribe ( subCount, mask ) {\n    if ( subCount === 1 ) {\n      this.info( `Only one React component is currently subscribed to ` +\n                 `%c'${ mask }'%c events, so the subscription will be removed`\n               , [ \"args\", \"normal\" ]\n               );\n      this.log( `Sending unsubscribe request, and deleting subscription ` +\n                `count entry for %c'${ mask }'`\n              , \"args\"\n              );\n    } else {\n      this.info( `${ subCount } React components are currently subscribed ` +\n                 `to %c'${ mask }'%c events, and one will be unsubscribed`\n               , [ \"args\", \"normal\" ]\n               );\n      this.log( `Decreasing subscription count for %c'${ mask }'`, \"args\" );\n    }\n  }\n\n  logPythonTraceback ( requestID, args, originalRequest ) {\n    console.groupCollapsed( `%cRequest %c'${ requestID }'%c caused a Python traceback`, this.DEBUGCSS.error, this.DEBUGCSS.uuid, this.DEBUGCSS.error );\n    if ( originalRequest ) {\n      console.groupCollapsed( \"Original request\" );\n      console.log( originalRequest );\n      console.groupEnd();\n    }\n    console.groupCollapsed( \"Response data\" );\n    console.log( args );\n    console.groupEnd();\n    console.log( \"%c\" + args.message , this.DEBUGCSS.code );\n    console.groupEnd();\n  }\n\n  logErrorWithCode ( requestID, args, originalRequest ) {\n    console.groupCollapsed( \"%cERROR %s: Request %c'%s'%c returned: %s\", this.DEBUGCSS.error, args.code, this.DEBUGCSS.uuid, requestID, this.DEBUGCSS.error, args.message );\n    if ( originalRequest ) {\n      console.groupCollapsed( \"Original request\" );\n      console.log( originalRequest );\n      console.groupEnd();\n    }\n    console.log( args );\n    console.groupEnd();\n  }\n\n  logErrorResponse ( requestID, args, originalRequest ) {\n    console.groupCollapsed( `%cERROR: Request %c'${ requestID }'%c returned with an error status`, this.DEBUGCSS.error, this.DEBUGCSS.uuid, this.DEBUGCSS.error );\n    if ( originalRequest ) {\n      console.groupCollapsed( \"Original request\" );\n      console.log( originalRequest );\n      console.groupEnd();\n    }\n    console.log( args );\n    console.groupEnd();\n  }\n\n}\n\nexport default new MiddlewareClientDebug();\n"]}